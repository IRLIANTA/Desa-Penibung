<IfModule mod_rewrite.c>
    RewriteEngine On

    # Cegah MultiViews dan Directory Listing
    <IfModule mod_negotiation.c>
        Options -MultiViews
    </IfModule>
    Options -Indexes

    # ===================================================================
    # üîê KEAMANAN: Blokir akses ke file sensitif
    # ===================================================================
    <FilesMatch "^(\.env|\.git|composer\.json|composer\.lock|artisan|phpunit\.xml|\.htaccess|\.gitignore|\.editorconfig|\.ftpquota)$">
        Require all denied
    </FilesMatch>

    # Blokir akses ke folder yang tidak boleh diakses via web
    RedirectMatch 403 ^/(vendor|node_modules|tests|\.git)(/.*)?$

    # ===================================================================
    # üîÑ SEO & CLEAN URL: Hapus trailing slash jika bukan folder
    # ===================================================================
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} (.+)/$
    RewriteRule ^ %1 [L,R=301]

    # ===================================================================
    # üìÅ Front Controller (opsional): Jika kamu pakai routing sederhana
    # Hapus bagian ini jika kamu tidak butuh URL tanpa .php
    # ===================================================================
    # Contoh: /about ‚Üí /about.php (jika file ada)
    # RewriteCond %{REQUEST_FILENAME} !-d
    # RewriteCond %{REQUEST_FILENAME}.php -f
    # RewriteRule ^(.*)$ $1.php [L]

</IfModule>


# <IfModule mod_rewrite.c>
#     <IfModule mod_negotiation.c>
#         Options -MultiViews -Indexes
#     </IfModule>

#     RewriteEngine On

#     # Blokir file sensitif
#     <FilesMatch "^(\.env|\.git|composer\.json|composer\.lock|artisan|server\.php|phpunit\.xml|\.htaccess)$">
#         Require all denied
#     </FilesMatch>

#     # Blok folder internal
#     RedirectMatch 403 ^/(storage|vendor|bootstrap|tests)(.*)$

#     # Handle Authorization Header
#     RewriteCond %{HTTP:Authorization} .
#     RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

#     # Redirect Trailing Slashes If Not A Folder
#     RewriteCond %{REQUEST_FILENAME} !-d
#     RewriteCond %{REQUEST_URI} (.+)/$
#     RewriteRule ^ %1 [L,R=301]

#     # Redirect all to index.php
#     RewriteCond %{REQUEST_FILENAME} !-d
#     RewriteCond %{REQUEST_FILENAME} !-f
#     RewriteRule ^ index.php [L]
# </IfModule>
